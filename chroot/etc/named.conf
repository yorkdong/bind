//
// named.caching-nameserver.conf
//
// Provided by Red Hat caching-nameserver package to configure the
// ISC BIND named(8) DNS server as a caching only nameserver 
// (as a localhost DNS resolver only). 
//
// See /usr/share/doc/bind*/sample/ for example named configuration files.
//
// DO NOT EDIT THIS FILE - use system-config-bind or an editor
// to create named.conf - edits to this file will be lost on 
// caching-nameserver package upgrade.
//
options {
	listen-on port 53 { any; };
	listen-on-v6 port 53 { ::1; };
	directory 	"/var/named";
	dump-file 	"/var/named/data/cache_dump.db";
        statistics-file "/var/named/data/named_stats.txt";
        memstatistics-file "/var/named/data/named_mem_stats.txt";
        version  "[cuisir]";
	// Those options should be used carefully because they disable port
	// randomization
	// query-source    port 53;	
	// query-source-v6 port 53;
       // zone-statistics { yes; }; 
	allow-query     { any; };
        allow-transfer { localhost; };
};
logging {
//        channel default_debug {
//                file "data/named.run";
//                severity dynamic;
//        };
//　　    category default {
//　　    default_debug; 
//　　     };
channel warning 
{ file "data/dns_warnings" versions 3 size 1240k; 
severity warning; 
print-category yes; 
print-severity yes; 
print-time yes; 
}; 
channel general_dns 
{ file "data/dns_logs" versions 3 size 1240k; 
severity info; 
print-category yes; 
print-severity yes; 
print-time yes; 
}; 
category default { warning; }; 
category queries { general_dns; }; 
}; 
#view localhost_resolver {
#	match-clients 	   { localhost; };
#	match-destinations { localhost; };
#	recursion yes;
#	include "/etc/named.rfc1912.zones";
#};
include "/etc/cn_ip/CNCGROUP";
include "/etc/cn_ip/CHINANET";
include "/etc/cn_ip/CERNET";
include "/etc/cn_ip/UNICOM";
include "/etc/cn_ip/LAN";
include "/etc/cn_ip/OTHER";
view "for_cncgroup" {
match-clients { china_cncgroup; };
recursion yes;
include "/etc/named_common.conf";
zone "scetop.com" {
check-names ignore;
type master;
file "tel.scetop.com";
allow-update { none; };
};
};
view "for_telecom" {
match-clients { china_telecom; };
recursion no;
include "/etc/named_common.conf";
zone "scetop.com" {
check-names ignore;
type master;
file "tel.scetop.com";
allow-update { none; };
};
//zone "217.71.125.in-addr.arpa" {
//type master;
//file "tel_scetop.local";
//allow-update { none; };
//};

};

view "for_cernet" {
match-clients { china_cernet; };
recursion no;
include "/etc/named_common.conf";
zone "scetop.com" {
check-names ignore;
type master;
file "tel.scetop.com";
allow-update { none; };};
};

view "for_unicom" {
match-clients { china_unicom; };
recursion no; 
include "/etc/named_common.conf";
zone "scetop.com" {
check-names ignore;
type master;
file "tel.scetop.com";
allow-update { none; };
};
};
view "for_lan"{
match-clients { lan; };
recursion yes;
include "/etc/named_common.conf";
zone "scetop.com" {
check-names ignore;
type master;
file "lan.scetop.com";
allow-update { none; };
};
};
view "for_other" {
match-clients { for_other;any; };
recursion yes;
include "/etc/named_common.conf";
zone "scetop.com" {
check-names ignore;
type master;
file "tel.scetop.com";
allow-update { none; };
};
};
//view "for_st.scetop.com" {
//match-clients { any; };
//recursion yes;
//include "/etc/named_common.conf";
//zone "st.scetop.com" {
//check-names ignore;
//type master;
//file "st.scetop.com";
//allow-update { none; };
//};
//};
